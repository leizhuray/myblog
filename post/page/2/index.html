<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>博客 | 首页</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="文字是有味道的，每个人的文章都有自己的特色。在这里我希望可以记录自己生活的与学习的美好瞬间，与大家分享。">
    <meta name="generator" content="Hugo 0.65.0" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    

  
  
    <link rel="stylesheet" href="/myblog/ananke/dist/main.css_5c99d70a7725bacd4c701e995b969fea.css" >
  




    
      

    

    
    
      <link href="/myblog/post/index.xml" rel="alternate" type="application/rss+xml" title="首页" />
      <link href="/myblog/post/index.xml" rel="feed" type="application/rss+xml" title="首页" />
      
    
    
    <meta property="og:title" content="博客" />
<meta property="og:description" content="文字是有味道的，每个人的文章都有自己的特色。在这里我希望可以记录自己生活的与学习的美好瞬间，与大家分享。" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://leizhuray.me/myblog/post/" />
<meta property="og:updated_time" content="2017-03-02T12:00:00-05:00" /><meta property="og:site_name" content="首页" />
<meta itemprop="name" content="博客">
<meta itemprop="description" content="文字是有味道的，每个人的文章都有自己的特色。在这里我希望可以记录自己生活的与学习的美好瞬间，与大家分享。"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="博客"/>
<meta name="twitter:description" content="文字是有味道的，每个人的文章都有自己的特色。在这里我希望可以记录自己生活的与学习的美好瞬间，与大家分享。"/>

	
  </head>

  <body class="ma0 avenir bg-near-white">

    

  
  
  <header class="cover bg-top" style="background-image: url('http://leizhuray.me/myblog/image/article.jpeg');">
    <div class="bg-black-60">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/myblog/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        首页
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/myblog/about/" title="关于我 page">
              关于我
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/myblog/post/" title="博客 page">
              博客
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/myblog/contact/" title="联系我 page">
              联系我
            </a>
          </li>
          
        </ul>
      
      















    </div>
  </div>
</nav>

      <div class="tc-l pv4 pv6-l ph3 ph4-ns">
        <h1 class="f2 f-subheadline-l fw2 white-90 mb0 lh-title">
          博客
        </h1>
        
          <h2 class="fw1 f5 f3-l white-80 measure-wide-l center mt3">
            文字是有味道的，每个人的文章都有自己的特色。在这里我希望可以记录自己生活的与学习的美好瞬间，与大家分享。
          </h2>
        
      </div>
    </div>
  </header>


    <main class="pb7" role="main">
      

  <article class="pa3 pa4-ns nested-copy-line-height nested-img">
    <section class="cf ph3 ph5-l pv3 pv4-l f4 tc-l center measure-wide lh-copy mid-gray">
      <p>世界上只有一种真正的英雄主义，就是认清了生活的真相后还依然热爱它。      &ndash; 罗曼·罗兰</p>

    </section>
    <aside class="flex-ns flex-wrap justify-around mt5">
      
        <div class="relative w-100 w-30-l mb4 bg-white">
          
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        January 31, 2021
      </div>
    
    <h1 class="f3 near-black">
      <a href="http://leizhuray.me/myblog/post/flash_02/" class="link black dim">
        Flash 程序使用总结(2)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Flash程序使用（二）  上一章节中讲了Flash的发展和程序安装，并且我们以Sedov激波为例运行了Flash程序。在这一章节中我们将讲解Flash中一个模拟case的组成部分。
模拟案例-以LaserSlab为例  Flash中提供了丰富的模拟案例。俗话说例子是最好的老师。学习写一个新case肯定需要从读懂已经有的case开始。Flash中所有的case存放在Flash文件夹中的source/Simulation/SimulationMain中，感兴趣的同学解压后可以到该路径下查看。大部分文件夹中都是一个完整的case。由于国内利用Flash做研究的学者大部分都是激光等离子体领域的人，所以在这里我们通过Flash中的LaserSlab这个case来进行讲解。在这个case中基本涉及到了我们上一节所提到的大部分的模块。相信大家可以通过理解这个case一通百通，从而可以写出自己所想要的case。
文件组成  进入LaserSlab文件夹后，看到一大堆文件，心头不由一紧。这也是我第一次看到时的想法。不要担心，我们可以化繁就简，这里面很多文件都是不同情况下的输入文件，就是你所看到的后缀名为.par的文件。组成一个case的基本文件大部分情况下只有6个，分别为Config, Simulation_init.F90, Simulation_data.F90, Simulation_initBlock.F90, Makefile以及flash.par。接下来我们将详细讲解每一个文件中的内容以及其作用。
Config文件  Config文件的主要作用在于确定要用的模块以及定义模拟中会用到的主要参数。如下图所示为LaserSlab案例下Config文件中的内容。以关键字REQUIRE开头的是模拟中需要用到的模块。USERSETUPVARS是指在setup这步时输入的可选参数，如果利用到三温模块（具体什么是三温后续会进行讲解），那么会调用其他的一些热传导以及扩散的模块。DATAFILES是指在模拟中会用到的一些数据文件。这里需要用到He气以及Al的状态方程和不透明度的表，这些表文件必须和case放在同一个文件夹中，否则无法成功复制到组件好的运行程序文件夹中。以D开头的为注释。PARAMETER是在模拟中会用到的一些模拟参数。在模拟中用做输入，或者会在不同文件中用到的数据，都需要在这里定义，否则会出错。在定义参数时需要指定参数名，参数类型，以及数据初始值。
Simulation_data.F90  在Config中注册的参量需要在Simulation_data.F90中指定数据类型从而传入并储存。
Simulation_init.F90  init顾名思义是进行初始化的。在这个case中我们需要从将从flash.par中读入的数据赋值给相应的参数并将其储存在程序中。函数RuntimeParameters_get()就是用来从flash.par中读取相应参数。
Simulation_initBlock.F90  在这些文件中最重要的就是这个文件。通过改变文件中的相应参数，可以决定靶的初始形状，初始位置等等。因此对这个文件需要进行详细的讲解。
 接下来利用三个循环将不同位置处的参量进行具体的定义。NDIM是在setup时定义的维度，species这个参量是用来区分是否为我们设定的不同粒子的信息。由于Flash不能解真空态，所以必须布上一些低密度的背景气体；在这个case中是利用He气作为背景气体的。确定好不同位置处的密度，温度等信息。利用Grid_putPointData这个函数将具体的信息赋值给程序计算。
 将所有的参量定义完成之后，就可以将之前用到的数组等的内存释放。这里需要注意的是画红线处的NDIM==2需要改成为NDIM&gt;=2；在不做三维的有磁场的情况时，这个case一般是对的。如果一旦做三维且有磁场的case，如果不做修正，相当于这里始终不会进入facez的那一步，所以会很快发现模拟盒子中磁场变得很小。
 基本上Simulation_initBlock.F90中的部分就都讲解的差不多了，接下来我们说flash.par文件。
Flash.par  flash.par就是Flash程序中的输入部分，在LaserSlab这个case中我们使用example.par这个文件。读者可以修改里面的具体参数改变你的输入值。在这里具体讲解一下激光注入部分吧，其他部分都很好理解。
 打开激光能量沉积的开关，规定使用的最高光线数目，注意后面的所有激光的光线数目的总和不能超过这个值。Laser pulse为激光的脉冲波形；beam为具体的激光参数。lens为激光注入的位置，注意该位置要在模拟box之外。target为激光想要对准的盒子内的位置。接下来是激光的焦斑半径的大小。激光脉冲的参数，之前定义的以及激光的波长，波长的单位是微米。接着是截面分布类型以及高斯形焦斑的分布。剩下的基本不需要修改了，但在二维的直角坐标中截面以及gridType只能用1维的。
 需要说明的是在这里打开了激光3Din2D的算法，所以只能用柱坐标。柱坐标中的y就是z，所以注意这里激光注入的时候box中的y的部分为z的部分。
Makefile  Makefile在这里是Simulation部分的，不是标准的make文件。在setup时会生成标准的gnu/make文件。在这里一般只需要写Simulation_data.o就可以，其他部分都在顶层的SimulationMain中有写。如果用到了其他的程序文件，在这里也需要写明。
 好了，基本上我们就把LaserSlab这个case讲解完了，后面我们会运行这个case，并讲解一下初步的后处理方法。希望可以帮到大家。
    </div>
  </div>

        </div>
      
        <div class="relative w-100 w-30-l mb4 bg-white">
          
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        January 30, 2021
      </div>
    
    <h1 class="f3 near-black">
      <a href="http://leizhuray.me/myblog/post/flash_01/" class="link black dim">
        Flash 程序使用总结
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Flash程序使用（一） 写在开头的话 今年已经是我博士入学的第四个年头，回想过去的博士生活，总觉的自己似乎什么没留下，因此想着从今天开始，有时间就整理一下自己博士期间的一些工作吧。就先从我经常使用的辐射流体程序Flash开始写起吧。今天这一章里就主要讲一下Flash程序的起源以及它主要可以用来做什么吧。笔者个人能力有限，如果有任何问题欢迎大家评说讨论。
Flash程序简介 Flash发展历史  听到Flash这个名字，可能你最先想起的是网页上的flash插件或者说是做动画的软件，但在天文或者活激光等离子体领域，Flash已经声名远扬。Flash是由芝加哥大学开发的一款自适应网格辐射流体力学软件，其官网链接为http://flash.uchicago.edu/site/。Flash的最初版本上线于20年前，现在的最新版本为4.6.2版。如果读者有意愿想使用Flash的code，可以在申请页面上申请下载账户。写明你的身份以及你想用Flash做什么后，一般会在1~2天内收到下载的账号，通过下载页面使用Flash中心邮件发给你的账号登录下载即可。
 芝加哥大学团队最初开发Flash的目的是用来研究包含核反应的天体物理过程，包括超新星爆发，X射线暴等。近年来随着模块的增加，特别是高能量密度物理模块的添加，越来越多的激光等离子体物理学家也开始利用Flash进行一些实验模拟研究。我个人认为，基本国内大部分做激光辐射流体的组都是依靠Flash在做基本的模拟计算，如果Flash不开源的话，大家手头可能都没有一个合适的程序进行计算。据Flash中心主任Tzeferacos的数据，现在全世界大约有3000多名天文活等离子体物理研究者利用Flash进行许多交叉科学的研究。
Flash程序功能 首先我们来看一张超炫的三维模拟图。
 上图为利用Flash软件模拟OMEGA上的dynamo放大自生磁场的三维模拟结果，文章原文可见链接。Flash中心主任TZEFERACOS以及DONALD LAMB通过该研究获得了2019年APS的John Dawson Award。
 Flash软件功能巨多，我在这里可能列举不全，很多功能与包库在平常的科研中我也没有用到。在这里以小点的形式总结一下。
 理想流体或磁流体计算模块 辐射转移模块-多群组辐射 激光注入模块（能量沉积及光线） 粒子模块 重力模块 核反应模块 实验诊断模块  质子成像 汤姆逊散射模块 X光成像模块   非理想流体计算  磁电阻项 霍尔项 Biermann磁场   状态方程及不透明度   Flash程序体量巨大，用户使用手册就有617页之厚（Flash4.6版手册），因此想要弄懂程序中的所有东西所耗费的时间是不可想象的。因此我建议读者有使用到哪些模块进行针对性的选读就可以。在后续的章节中我将详细阐述Flash计算的基本方程以及某些模块的使用。
Flash程序安装 依赖包库  HDF5模块  Flash的数据输出依赖于hdf5包库的安装   F90以及C编译器  Flash中的绝大部分是使用Fortran语言进行编写，部分外挂程序库是使用C语言的，所以Fortran编译器以及C编译器是必须的。   MPI并行  如果要进行大规模的科学进行，并行是必不可少的。大规模计算也可以放在超算上进行并行计算。   HYPRE 解法器  Hypre 解法器是在进行高能量密度物理（一般是由高功率激光激光注入时）需要用到的，其中的多群组辐射和热传导依赖于该解法器的存在。   GNU  程序编译中需要使用make，所以gnu的安装也是必须的。   Python  在运行setup脚本时需要用到python程序，安装python2版本，似乎最新版也对python3进行了支持，还没有下载尝试。Flash利用setup脚本将用到模块代码打包组装到一起。    镜像安装依赖库  Flash官方中心在其Github主页上提供了Flash4依赖包库的镜像打包版，如果只是尝鲜的用户可以使用dock拉载该镜像，如果长期用作科研的，还是建议在个人电脑或者服务器上安装好必备的依赖库。
    </div>
  </div>

        </div>
      
        <div class="relative w-100 w-30-l mb4 bg-white">
          
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        August 30, 2020
      </div>
    
    <h1 class="f3 near-black">
      <a href="http://leizhuray.me/myblog/post/test/" class="link black dim">
        The First
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      Hi 大家好，我是Ray，来自北京大学物理学院的在读博士生。这是本站的第一篇博客，我希望再以后的日子里可以常更新，把我日常生活中的一些小事随笔或者生活感悟，亦或是一些学习到的知识写成博客分享给大家。
    </div>
  </div>

        </div>
      
    </aside>
    

<ul class="pagination">
    
    <li class="page-item">
        <a href="/myblog/post/" class="page-link" aria-label="First"><span aria-hidden="true">&laquo;&laquo;</span></a>
    </li>
    
    <li class="page-item">
    <a href="/myblog/post/" class="page-link" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
    </li>
    
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/myblog/post/">1</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item active"><a class="page-link" href="/myblog/post/page/2/">2</a></li>
    
    
    <li class="page-item disabled">
    <a  class="page-link" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
    </li>
    
    <li class="page-item">
        <a href="/myblog/post/page/2/" class="page-link" aria-label="Last"><span aria-hidden="true">&raquo;&raquo;</span></a>
    </li>
    
</ul>


  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://leizhuray.me/myblog/" >
    &copy;  首页 2021 
  </a>
    <div>














</div>
  </div>
</footer>

  </body>
</html>
